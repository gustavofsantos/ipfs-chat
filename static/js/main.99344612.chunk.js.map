{"version":3,"sources":["state/app-context.js","components/new-message.js","state/state-types.js","state/state-actions.js","components/join-form.js","pages/join-page.js","components/header.js","components/messages.js","pages/chat-page.js","state/app-reducer.js","App.js","serviceWorker.js","index.js"],"names":["__webpack_require__","d","__webpack_exports__","AppStateContext","AppDispatchContext","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","React","createContext","NewMessage","_useState","useState","_useState2","Object","C_Users_gusta_workspace_projects_ipfs_chat_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","message","setMessage","_useContext","useContext","ipfs","topic","user","handleChange","useCallback","ev","target","value","handleSubmit","preventDefault","console","log","pubsub","publish","Buffer","from","JSON","stringify","fromUser","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","Fragment","className","onSubmit","onChange","type","SET_IPFS","SET_USER","SET_TOPIC","PUSH_MESSAGE","actionPushMessage","payload","actionSetUser","actionSetTopic","actionSetIpfsNode","withRouter","slicedToArray","setUser","_useState3","_useState4","setTopic","dispatch","handleJoin","react_default","placeholder","props","state","history","useEffect","window","Ipfs","EXPERIMENTAL","repo","concat","Math","random","config","Addresses","Swarm","once","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","id","sent","subscribe","msg","error","push","stop","e","join_form","Header","Messages","messages","map","msgId","seqno","toString","rawMessage","data","dataMessage","parse","key","new_message","INITIAL_STATE","reducer","action","objectSpread","toConsumableArray","App","_useReducer","useReducer","_useReducer2","app_context","Provider","react_router_dom","react_router","path","exact","component","JoinPage","ChatPage","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","src_App","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.99344612.chunk.js","sourcesContent":["import React from 'react';\n\nexport const AppStateContext = React.createContext(null);\nexport const AppDispatchContext = React.createContext(null);\n","import React, { useCallback, useState, useContext } from 'react';\nimport { AppStateContext } from '../state/app-context';\n\nexport default function NewMessage() {\n  const [message, setMessage] = useState('');\n  const { ipfs, topic, user } = useContext(AppStateContext);\n\n  const handleChange = useCallback((ev) => {\n    setMessage(ev.target.value);\n  }, []);\n\n  const handleSubmit = useCallback((ev) => {\n    ev.preventDefault();\n\n    console.log('shoud publish', message);\n\n    ipfs.pubsub.publish(topic, Buffer.from(JSON.stringify({\n      fromUser: user,\n      message,\n    })));\n\n    setMessage('');\n  }, [message, ipfs, topic, user]);\n\n  return (\n    <React.Fragment>\n      <form className=\"new-message\" onSubmit={handleSubmit}>\n        <input className=\"new-message__input\" value={message} onChange={handleChange} />\n        <button className=\"new-message__button\" type=\"submit\">send</button>\n      </form>\n    </React.Fragment>\n  );\n}\n","export const SET_IPFS = 'APP_SET_IPFS_NODE';\n\n// chat action types\nexport const SET_USER = 'CHAT_SET_USER';\nexport const SET_TOPIC = 'CHAT_SET_TOPIC';\nexport const PUSH_MESSAGE = 'CHAT_PUSH_MESSAGE';\n","import {\n  PUSH_MESSAGE, SET_IPFS, SET_TOPIC, SET_USER,\n} from './state-types';\n\nexport const actionPushMessage = payload => ({\n  type: PUSH_MESSAGE,\n  payload,\n});\n\nexport const actionSetUser = payload => ({\n  type: SET_USER,\n  payload,\n});\n\nexport const actionSetTopic = payload => ({\n  type: SET_TOPIC,\n  payload,\n});\n\n\nexport const actionSetIpfsNode = payload => ({\n  type: SET_IPFS,\n  payload,\n});\n","import React, { useState, useCallback, useContext } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { AppDispatchContext } from '../state/app-context';\nimport { actionSetTopic, actionSetUser } from '../state/state-actions';\n\nexport function JoinForm() {\n  const [user, setUser] = useState('');\n  const [topic, setTopic] = useState('');\n  const dispatch = useContext(AppDispatchContext);\n\n  const handleJoin = useCallback((ev) => {\n    ev.preventDefault();\n\n    dispatch(actionSetUser(user));\n    dispatch(actionSetTopic(topic));\n  }, [user, topic, dispatch]);\n\n  return (\n    <React.Fragment>\n      <form onSubmit={handleJoin}>\n        <input\n          value={user}\n          onChange={ev => setUser(ev.target.value)}\n          placeholder=\"your user name\"\n        />\n        <input\n          className=\"mg-bottom-16\"\n          value={topic}\n          onChange={ev => setTopic(ev.target.value)}\n          placeholder=\"topic to subscribe\"\n        />\n        <button type=\"submit\">join!</button>\n      </form>\n    </React.Fragment>\n  );\n}\n\nexport default withRouter(JoinForm);\n","import React, { useContext, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { shape, func } from 'prop-types';\nimport JoinForm from '../components/join-form';\nimport { AppDispatchContext, AppStateContext } from '../state/app-context';\nimport { actionPushMessage, actionSetIpfsNode } from '../state/state-actions';\n\nexport function JoinPage(props) {\n  const state = useContext(AppStateContext);\n  const dispatch = useContext(AppDispatchContext);\n  const { history } = props;\n\n  useEffect(() => {\n    if (state.user && state.topic) {\n      console.log('should init ipfs');\n\n      try {\n        const ipfs = new window.Ipfs({\n          EXPERIMENTAL: {\n            pubsub: true,\n          },\n          repo: `ipfs-${Math.random()}`,\n          config: {\n            Addresses: {\n              Swarm: ['/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star'],\n            },\n          },\n        });\n\n        ipfs.once('start', async () => {\n          const id = await ipfs.id();\n\n          if (id) {\n            ipfs.pubsub.subscribe(state.topic, (msg) => {\n              dispatch(actionPushMessage(msg));\n            }, console.error);\n\n            dispatch(actionSetIpfsNode(ipfs));\n\n            history.push('/chat');\n          }\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }, [state.user, state.topic, dispatch, history]);\n\n  return (\n    <div className=\"page__join\">\n      <div className=\"mg-bottom-32\">\n        <h1>Hellow</h1>\n        <h4>Welcome to IPFS Chat!</h4>\n      </div>\n\n      <JoinForm />\n    </div>\n  );\n}\n\nJoinPage.propTypes = {\n  history: shape({\n    push: func.isRequired,\n  }).isRequired,\n};\n\nexport default withRouter(JoinPage);\n","import React, { useContext } from 'react';\nimport { AppStateContext } from '../state/app-context';\n\nexport default function Header() {\n  const { user, topic } = useContext(AppStateContext);\n\n  return (\n    <header className=\"header\">\n      <p>\n        {user}\n        {' '}\n@\n        {' '}\n        {topic}\n      </p>\n    </header>\n  );\n}\n","import React, { useEffect, useContext } from 'react';\nimport { AppStateContext } from '../state/app-context';\n\nexport default function Messages() {\n  const { messages } = useContext(AppStateContext);\n\n  useEffect(() => {\n    console.log('new message! ', messages);\n  }, [messages]);\n\n  return (\n    <React.Fragment>\n      <ul className=\"messages\">\n        {messages.map((message) => {\n          const msgId = message.seqno.toString();\n          const rawMessage = message.data.toString();\n\n          const dataMessage = JSON.parse(rawMessage);\n\n          return (\n            <li key={msgId}>\n              <div className=\"message\">\n                <p className=\"message__author\">{dataMessage.fromUser}</p>\n                <p className=\"message__text\">{dataMessage.message}</p>\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect, useContext } from 'react';\nimport { shape, func } from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport Header from '../components/header';\nimport Messages from '../components/messages';\nimport NewMessage from '../components/new-message';\nimport { AppStateContext } from '../state/app-context';\n\nexport function ChatPage(props) {\n  const { ipfs } = useContext(AppStateContext);\n  const { history } = props;\n\n  useEffect(() => {\n    if (!ipfs) {\n      history.push('/');\n    }\n  }, [history, ipfs]);\n\n  return (\n    <div className=\"page__chat\">\n      <Header />\n      <Messages />\n      <NewMessage />\n    </div>\n  );\n}\n\nChatPage.propTypes = {\n  history: shape({\n    push: func.isRequired,\n  }).isRequired,\n};\n\nexport default withRouter(ChatPage);\n","import {\n  PUSH_MESSAGE, SET_IPFS, SET_TOPIC, SET_USER,\n} from './state-types';\n\nexport const INITIAL_STATE = {\n  user: null,\n  topic: '',\n  messages: [],\n  ipfs: null,\n};\n\n/**\n *\n * @param {object} state\n * @param {object} action\n * @param {string} action.type\n * @param {object|string} action.payload\n * @returns {*|{user: *}|{topic: *}|{messages: *[]}}\n */\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case PUSH_MESSAGE:\n      return { ...state, messages: [...state.messages, action.payload] };\n    case SET_USER:\n      return { ...state, user: action.payload };\n    case SET_TOPIC:\n      return { ...state, topic: action.payload };\n    case SET_IPFS:\n      return { ...state, ipfs: action.payload };\n    default:\n      return state;\n  }\n}\n","import React, { useReducer } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport JoinPage from './pages/join-page';\nimport ChatPage from './pages/chat-page';\nimport reducer, { INITIAL_STATE } from './state/app-reducer';\nimport { AppDispatchContext, AppStateContext } from './state/app-context';\n\n/**\n * App main component\n * @returns {*}\n */\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, INITIAL_STATE);\n\n  return (\n    <AppDispatchContext.Provider value={dispatch}>\n      <AppStateContext.Provider value={state}>\n        <Router>\n          <div className=\"page\">\n            <Route path=\"/\" exact component={JoinPage} />\n            <Route path=\"/chat\" component={ChatPage} />\n          </div>\n        </Router>\n      </AppStateContext.Provider>\n    </AppDispatchContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    || window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404\n        || (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nserviceWorker.register();\n"],"sourceRoot":""}